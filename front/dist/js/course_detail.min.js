function CourseDetail(){}CourseDetail.prototype.run=function(){this.initPlayer()},CourseDetail.prototype.listenPayEvent=function(){var e=$(".buy-btn"),t=e.attr("data-user-id");e.click(function(e){t||window.messageBox.showInfo("请先登录!")})},CourseDetail.prototype.initPlayer=function(){var e=$("#video-info"),t=e.attr("data-video-url"),o=e.attr("data-cover-url"),n=e.attr("data-course-id"),a=cyberplayer("playcontainer").setup({width:"100%",height:"100%",file:t,image:o,autostart:!1,stretching:"uniform",repeat:!1,volume:50,controls:!0,tokenEncrypt:!0,ak:"72d3fdc507ba4dadbf33b8193138327d"});a.on("beforePlay",function(o){/m3u8/.test(o.file)&&$.get({url:"/course/course_token/",data:{video:t,course_id:n},success:function(e){if(200===e.code){var t=e.data.token;a.setToken(o.file,t)}else window.messageBox.showInfo(e.message),a.stop()},error:function(e){console.log(e)}})})},$(function(){(new CourseDetail).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvdXJzZV9kZXRhaWwuanMiXSwibmFtZXMiOlsiQ291cnNlRGV0YWlsIiwicHJvdG90eXBlIiwicnVuIiwidGhpcyIsImluaXRQbGF5ZXIiLCJsaXN0ZW5QYXlFdmVudCIsImJ1eUJ0biIsIiQiLCJ1c2VyIiwiYXR0ciIsImNsaWNrIiwiZSIsIndpbmRvdyIsIm1lc3NhZ2VCb3giLCJzaG93SW5mbyIsInZpZGVvSW5mbyIsInZpZGVvX3VybCIsImNvdmVyX3VybCIsImNvdXJzZV9pZCIsInBsYXllciIsImN5YmVycGxheWVyIiwic2V0dXAiLCJ3aWR0aCIsImhlaWdodCIsImZpbGUiLCJpbWFnZSIsImF1dG9zdGFydCIsInN0cmV0Y2hpbmciLCJyZXBlYXQiLCJ2b2x1bWUiLCJjb250cm9scyIsInRva2VuRW5jcnlwdCIsImFrIiwib24iLCJ0ZXN0IiwiZ2V0IiwidXJsIiwiZGF0YSIsInZpZGVvIiwic3VjY2VzcyIsInJlcyIsImNvZGUiLCJ0b2tlbiIsInNldFRva2VuIiwibWVzc2FnZSIsInN0b3AiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLGdCQUlUQSxhQUFhQyxVQUFVQyxJQUFNLFdBQzFCQyxLQUFLQyxjQUdSSixhQUFhQyxVQUFVSSxlQUFpQixXQUN0QyxJQUFJQyxFQUFTQyxFQUFFLFlBQ1hDLEVBQU9GLEVBQU9HLEtBQUssZ0JBQ3ZCSCxFQUFPSSxNQUFNLFNBQVVDLEdBQ2hCSCxHQUNESSxPQUFPQyxXQUFXQyxTQUFTLFlBS25DZCxhQUFhQyxVQUFVRyxXQUFhLFdBQ2xDLElBQUlXLEVBQVlSLEVBQUUsZUFDZFMsRUFBWUQsRUFBVU4sS0FBSyxrQkFDM0JRLEVBQVlGLEVBQVVOLEtBQUssa0JBQzNCUyxFQUFZSCxFQUFVTixLQUFLLGtCQUUzQlUsRUFBU0MsWUFBWSxpQkFBaUJDLE1BQU0sQ0FDNUNDLE1BQU8sT0FDUEMsT0FBUSxPQUNSQyxLQUFNUixFQUNOUyxNQUFPUixFQUNQUyxXQUFXLEVBQ1hDLFdBQVksVUFDWkMsUUFBUSxFQUNSQyxPQUFRLEdBQ1JDLFVBQVUsRUFDVkMsY0FBYyxFQUVkQyxHQUFJLHFDQUVSYixFQUFPYyxHQUFHLGFBQWMsU0FBVXRCLEdBQzFCLE9BQU91QixLQUFLdkIsRUFBRWEsT0FJbEJqQixFQUFFNEIsSUFBSSxDQUNIQyxJQUFLLHdCQUNMQyxLQUFNLENBQ0hDLE1BQVN0QixFQUNURSxVQUFhQSxHQUVoQnFCLFFBQVMsU0FBVUMsR0FDaEIsR0FBZSxNQUFYQSxFQUFJQyxLQUFZLENBQ2pCLElBQUlDLEVBQVFGLEVBQVUsS0FBUyxNQUMvQnJCLEVBQU93QixTQUFTaEMsRUFBRWEsS0FBTWtCLFFBRXhCOUIsT0FBT0MsV0FBV0MsU0FBUzBCLEVBQUlJLFNBQy9CekIsRUFBTzBCLFFBR2JDLE1BQU8sU0FBVU4sR0FDZE8sUUFBUUMsSUFBSVIsU0FNeEJqQyxFQUFFLFlBQ29CLElBQUlQLGNBQ1ZFIiwiZmlsZSI6ImNvdXJzZV9kZXRhaWwubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gQ291cnNlRGV0YWlsKCkge1xuXG59XG5cbkNvdXJzZURldGFpbC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgdGhpcy5pbml0UGxheWVyKCk7XG59O1xuXG5Db3Vyc2VEZXRhaWwucHJvdG90eXBlLmxpc3RlblBheUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgYnV5QnRuID0gJCgnLmJ1eS1idG4nKTtcbiAgdmFyIHVzZXIgPSBidXlCdG4uYXR0cignZGF0YS11c2VyLWlkJyk7XG4gIGJ1eUJ0bi5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgIGlmICghdXNlcikge1xuICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93SW5mbygn6K+35YWI55m75b2VIScpO1xuICAgIH1cbiAgfSlcbn07XG5cbkNvdXJzZURldGFpbC5wcm90b3R5cGUuaW5pdFBsYXllciA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHZpZGVvSW5mbyA9ICQoJyN2aWRlby1pbmZvJyk7XG4gIHZhciB2aWRlb191cmwgPSB2aWRlb0luZm8uYXR0cignZGF0YS12aWRlby11cmwnKTtcbiAgdmFyIGNvdmVyX3VybCA9IHZpZGVvSW5mby5hdHRyKCdkYXRhLWNvdmVyLXVybCcpO1xuICB2YXIgY291cnNlX2lkID0gdmlkZW9JbmZvLmF0dHIoJ2RhdGEtY291cnNlLWlkJyk7XG5cbiAgdmFyIHBsYXllciA9IGN5YmVycGxheWVyKFwicGxheWNvbnRhaW5lclwiKS5zZXR1cCh7XG4gICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICBmaWxlOiB2aWRlb191cmwsXG4gICAgICBpbWFnZTogY292ZXJfdXJsLFxuICAgICAgYXV0b3N0YXJ0OiBmYWxzZSxcbiAgICAgIHN0cmV0Y2hpbmc6IFwidW5pZm9ybVwiLFxuICAgICAgcmVwZWF0OiBmYWxzZSxcbiAgICAgIHZvbHVtZTogNTAsXG4gICAgICBjb250cm9sczogdHJ1ZSxcbiAgICAgIHRva2VuRW5jcnlwdDogdHJ1ZSxcbiAgICAgIC8vIOi/memHjOeahGFr5piv55m+5bqm5LqR55qEQWNjZXNzS2V5LOWcqOWuieWFqOiupOivgS9hY2Nlc3NrZXlcbiAgICAgIGFrOiAnNzJkM2ZkYzUwN2JhNGRhZGJmMzNiODE5MzEzODMyN2QnXG4gIH0pO1xuICBwbGF5ZXIub24oJ2JlZm9yZVBsYXknLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYoIS9tM3U4Ly50ZXN0KGUuZmlsZSkpeyAvL+WmguaenOinhumikemDqOe9sm0zdTjmoLzlvI/vvIznm7TmjqXov5Tlm55cbiAgICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgJC5nZXQoe1xuICAgICAgICAgdXJsOiAnL2NvdXJzZS9jb3Vyc2VfdG9rZW4vJyxcbiAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICd2aWRlbyc6IHZpZGVvX3VybCxcbiAgICAgICAgICAgICdjb3Vyc2VfaWQnOiBjb3Vyc2VfaWRcbiAgICAgICAgIH0sXG4gICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBpZiAocmVzLmNvZGU9PT0yMDApIHtcbiAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IHJlc1snZGF0YSddWyd0b2tlbiddO1xuICAgICAgICAgICAgICAgcGxheWVyLnNldFRva2VuKGUuZmlsZSwgdG9rZW4pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dJbmZvKHJlcy5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgIHBsYXllci5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICB9LFxuICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAgICAgICB9XG4gICAgICB9KVxuICB9KVxufTtcblxuJChmdW5jdGlvbiAoKSB7XG4gICB2YXIgY291cnNlRGV0YWlsID0gbmV3IENvdXJzZURldGFpbCgpO1xuICAgY291cnNlRGV0YWlsLnJ1bigpO1xufSk7Il19
