function AddTeacher(){this.progressGroup=$("#progress-group")}AddTeacher.prototype.run=function(){var e=this;e.listenQiniuFileUploadEvent(),e.initUeditor(),e.listenAddNewsEvent(),e.listenDeleteTeacherEvent()},AddTeacher.prototype.initUeditor=function(){window.ue=UE.getEditor("profile-editor",{initialFrameHeight:500,serverUrl:"/ueditor/upload/"})},AddTeacher.prototype.listenAddNewsEvent=function(){$("#teacher-submit-btn").click(function(e){e.preventDefault();var o=$(this).attr("data-teacher-id");console.log("pk的值:",o);var t="";t=o?"/cms/edit_course_teacher/":"/cms/add_course_teacher/";var r=$("input[name='username']").val(),n=$("input[name='jobtitle']").val(),a=$("input[name='thumbnail']").val(),i=window.ue.getContent();console.log(r,n,a,i),$.post({url:t,data:{username:r,jobtitle:n,avatar_url:a,profile:i,pk:o},success:function(e){200===e.code?xfzalert.alertSuccess("添加讲师成功!",function(){window.location.reload()}):window.messageBox.showError(e.message)},error:function(e){window.messageBox.showError(e.message)}})})},AddTeacher.prototype.listenDeleteTeacherEvent=function(){$(".delete-btn").click(function(e){e.preventDefault();var o=$(this).attr("data-teacher-id");xfzalert.alertConfirm({text:"你确实要删除该讲师?",confirmCallback:function(){$.post({url:"/cms/delete_course_teacher/",data:{teacher_id:o},success:function(e){200===e.code&&(window.location.reload(),window.messageBox.showSuccess(message=e.message))}})}})})},AddTeacher.prototype.listenUploadfileEvent=function(){$("#thumbnail-btn").change(function(){var e=this.files[0],o=new FormData;o.append("file",e),$.post({url:"/cms/upload_file/",data:o,contentType:!1,processData:!1,success:function(e){if(200===e.code){var o=e.data.url;$("#thumbnail-form").val(o)}else window.messageBox.showError(e.message)},error:function(e){console.log(e)}})})},AddTeacher.prototype.listenQiniuFileUploadEvent=function(){var i=this;$("#thumbnail-btn").change(function(){var a=this.files[0];$.get({url:"/cms/qn_token/",success:function(e){if(200===e.code){var o=e.data.token,t=(new Date).getTime()+"."+a.name.split(".")[1],r={fname:t,params:{},mimeType:null},n={useCdnDomain:!0,retryCount:5,region:qiniu.region.z2};qiniu.upload(a,t,o,r,n).subscribe({next:i.handleFileUploadProcess,error:i.handleFileUploadError,complete:i.handleFileUploadComplete})}}})})},AddTeacher.prototype.handleFileUploadProcess=function(e){var o=e.total.percent.toFixed(0)+"%";AddTeacher.progressGroup.show();var t=$(".progress-bar");t.css({width:o}),t.text(o)},AddTeacher.prototype.handleFileUploadError=function(e){window.messageBox.showError(e.message),$("#progress-group").hide(),console.log(e.message)},AddTeacher.prototype.handleFileUploadComplete=function(e){console.log(e),$("#progress-group").hide();var o="http://ptmoolpfo.bkt.clouddn.com/"+e.key;$("#thumbnail-form").val(o)},$(function(){(new AddTeacher).run(),AddTeacher.progressGroup=$("#progress-group")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlYWNoZXIuanMiXSwibmFtZXMiOlsiQWRkVGVhY2hlciIsInRoaXMiLCJwcm9ncmVzc0dyb3VwIiwiJCIsInByb3RvdHlwZSIsInJ1biIsInRoYXQiLCJsaXN0ZW5RaW5pdUZpbGVVcGxvYWRFdmVudCIsImluaXRVZWRpdG9yIiwibGlzdGVuQWRkTmV3c0V2ZW50IiwibGlzdGVuRGVsZXRlVGVhY2hlckV2ZW50Iiwid2luZG93IiwidWUiLCJVRSIsImdldEVkaXRvciIsImluaXRpYWxGcmFtZUhlaWdodCIsInNlcnZlclVybCIsImNsaWNrIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInBrIiwiYXR0ciIsImNvbnNvbGUiLCJsb2ciLCJ1cmwiLCJ1c2VybmFtZSIsInZhbCIsImpvYnRpdGxlIiwiYXZhdGFyX3VybCIsInByb2ZpbGUiLCJnZXRDb250ZW50IiwicG9zdCIsImRhdGEiLCJzdWNjZXNzIiwicmVzIiwiY29kZSIsInhmemFsZXJ0IiwiYWxlcnRTdWNjZXNzIiwibG9jYXRpb24iLCJyZWxvYWQiLCJtZXNzYWdlQm94Iiwic2hvd0Vycm9yIiwibWVzc2FnZSIsImVycm9yIiwidGVhY2hlcl9pZCIsImFsZXJ0Q29uZmlybSIsInRleHQiLCJjb25maXJtQ2FsbGJhY2siLCJzaG93U3VjY2VzcyIsImxpc3RlblVwbG9hZGZpbGVFdmVudCIsImNoYW5nZSIsImZpbGUiLCJmaWxlcyIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJjb250ZW50VHlwZSIsInByb2Nlc3NEYXRhIiwiZ2V0IiwidG9rZW4iLCJrZXkiLCJEYXRlIiwiZ2V0VGltZSIsIm5hbWUiLCJzcGxpdCIsInB1dEV4dHJhIiwiZm5hbWUiLCJwYXJhbXMiLCJtaW1lVHlwZSIsImNvbmZpZyIsInVzZUNkbkRvbWFpbiIsInJldHJ5Q291bnQiLCJyZWdpb24iLCJxaW5pdSIsInoyIiwidXBsb2FkIiwic3Vic2NyaWJlIiwibmV4dCIsImhhbmRsZUZpbGVVcGxvYWRQcm9jZXNzIiwiaGFuZGxlRmlsZVVwbG9hZEVycm9yIiwiY29tcGxldGUiLCJoYW5kbGVGaWxlVXBsb2FkQ29tcGxldGUiLCJyZXNwb25zZSIsInBlcmNlbnRUZXh0IiwidG90YWwiLCJwZXJjZW50IiwidG9GaXhlZCIsInNob3ciLCJwcm9ncmVzc0JhciIsImNzcyIsIndpZHRoIiwiaGlkZSJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsYUFDTEMsS0FBS0MsY0FBZ0JDLEVBQUUsbUJBRzNCSCxXQUFXSSxVQUFVQyxJQUFNLFdBQ3ZCLElBQUlDLEVBQU1MLEtBRVZLLEVBQUtDLDZCQUNMRCxFQUFLRSxjQUNMRixFQUFLRyxxQkFDTEgsRUFBS0ksNEJBR1RWLFdBQVdJLFVBQVVJLFlBQWMsV0FDL0JHLE9BQU9DLEdBQUtDLEdBQUdDLFVBQVUsaUJBQWtCLENBQ3ZDQyxtQkFBc0IsSUFDdEJDLFVBQWEsc0JBSXJCaEIsV0FBV0ksVUFBVUssbUJBQXFCLFdBRXhCTixFQUFFLHVCQUNSYyxNQUFNLFNBQVVDLEdBQ3RCQSxFQUFNQyxpQkFFTixJQUNJQyxFQURNakIsRUFBRUYsTUFDQ29CLEtBQUssbUJBQ2xCQyxRQUFRQyxJQUFJLFFBQVNILEdBQ3JCLElBQUlJLEVBQU0sR0FHTkEsRUFEQUosRUFDTSw0QkFFQSwyQkFHVixJQUFJSyxFQUFXdEIsRUFBRSwwQkFBMEJ1QixNQUN2Q0MsRUFBV3hCLEVBQUUsMEJBQTBCdUIsTUFDdkNFLEVBQWF6QixFQUFFLDJCQUEyQnVCLE1BQzFDRyxFQUFVbEIsT0FBT0MsR0FBR2tCLGFBQ3hCUixRQUFRQyxJQUFJRSxFQUFVRSxFQUFVQyxFQUFZQyxHQUU1QzFCLEVBQUU0QixLQUFLLENBQ0hQLElBQUtBLEVBQ0xRLEtBQU0sQ0FDRlAsU0FBWUEsRUFDWkUsU0FBWUEsRUFDWkMsV0FBY0EsRUFDZEMsUUFBV0EsRUFDWFQsR0FBTUEsR0FFVmEsUUFBUyxTQUFVQyxHQUNFLE1BQWJBLEVBQUlDLEtBQ0pDLFNBQVNDLGFBQWEsVUFBVyxXQUM3QjFCLE9BQU8yQixTQUFTQyxXQUdwQjVCLE9BQU82QixXQUFXQyxVQUFVUCxFQUFJUSxVQUd4Q0MsTUFBTyxTQUFVVCxHQUNidkIsT0FBTzZCLFdBQVdDLFVBQVVQLEVBQUlRLGVBTTlDMUMsV0FBV0ksVUFBVU0seUJBQTJCLFdBRXBDUCxFQUFFLGVBQ1JjLE1BQU0sU0FBVUMsR0FDbEJBLEVBQU1DLGlCQUNOLElBQ0l5QixFQURhekMsRUFBRUYsTUFDU29CLEtBQUssbUJBRWpDZSxTQUFTUyxhQUFhLENBQ3BCQyxLQUFRLGFBQ1JDLGdCQUFtQixXQUNqQjVDLEVBQUU0QixLQUFLLENBQ0xQLElBQUssOEJBQ0xRLEtBQU0sQ0FDSlksV0FBY0EsR0FFaEJYLFFBQVMsU0FBVUMsR0FDQSxNQUFiQSxFQUFJQyxPQUNOeEIsT0FBTzJCLFNBQVNDLFNBQ2hCNUIsT0FBTzZCLFdBQVdRLFlBQVlOLFFBQVFSLEVBQUlRLG1CQVN4RDFDLFdBQVdJLFVBQVU2QyxzQkFBd0IsV0FDMUI5QyxFQUFFLGtCQUNSK0MsT0FBTyxXQUVaLElBQUlDLEVBQU9sRCxLQUFLbUQsTUFBTSxHQUNsQkMsRUFBVyxJQUFJQyxTQUNuQkQsRUFBU0UsT0FBTyxPQUFRSixHQUV4QmhELEVBQUU0QixLQUFLLENBQ0hQLElBQUssb0JBQ0xRLEtBQU1xQixFQUNORyxhQUFhLEVBQ2JDLGFBQWEsRUFDYnhCLFFBQVMsU0FBVUMsR0FDZixHQUFpQixNQUFiQSxFQUFJQyxLQUFjLENBQ2xCLElBQUlYLEVBQU1VLEVBQVUsS0FBTyxJQUNOL0IsRUFBRSxtQkFDUnVCLElBQUlGLFFBRW5CYixPQUFPNkIsV0FBV0MsVUFBVVAsRUFBSVEsVUFHeENDLE1BQU8sU0FBVVQsR0FDYlosUUFBUUMsSUFBSVcsU0FNNUJsQyxXQUFXSSxVQUFVRywyQkFBNkIsV0FDaEQsSUFBSUQsRUFBT0wsS0FDUUUsRUFBRSxrQkFFUitDLE9BQU8sV0FDaEIsSUFBSUMsRUFBT2xELEtBQUttRCxNQUFNLEdBQ3RCakQsRUFBRXVELElBQUksQ0FDRmxDLElBQUssaUJBQ0xTLFFBQVMsU0FBVUMsR0FDZixHQUFpQixNQUFiQSxFQUFJQyxLQUFjLENBQ2xCLElBQUl3QixFQUFRekIsRUFBVSxLQUFTLE1BRTNCMEIsR0FBTSxJQUFLQyxNQUFRQyxVQUFZLElBQU1YLEVBQUtZLEtBQUtDLE1BQU0sS0FBSyxHQUMxREMsRUFBVyxDQUNYQyxNQUFPTixFQUNQTyxPQUFRLEdBRVJDLFNBQVUsTUFFVkMsRUFBUyxDQUNUQyxjQUFjLEVBQ2RDLFdBQVksRUFDWkMsT0FBUUMsTUFBTUQsT0FBT0UsSUFFUkQsTUFBTUUsT0FBT3hCLEVBQU1TLEVBQUtELEVBQU9NLEVBQVVJLEdBQy9DTyxVQUFVLENBQ2pCQyxLQUFRdkUsRUFBS3dFLHdCQUNibkMsTUFBU3JDLEVBQUt5RSxzQkFDZEMsU0FBWTFFLEVBQUsyRSxrQ0FTdkNqRixXQUFXSSxVQUFVMEUsd0JBQTBCLFNBQVVJLEdBQ3JELElBRUlDLEVBRlFELEVBQVNFLE1BQ0RDLFFBQ01DLFFBQVEsR0FBSyxJQUNuQnRGLFdBQVdFLGNBQ2pCcUYsT0FFZCxJQUFJQyxFQUFjckYsRUFBRSxpQkFDcEJxRixFQUFZQyxJQUFJLENBQUNDLE1BQVNQLElBQzFCSyxFQUFZMUMsS0FBS3FDLElBSXJCbkYsV0FBV0ksVUFBVTJFLHNCQUF3QixTQUFVRyxHQUNuRHZFLE9BQU82QixXQUFXQyxVQUFVeUMsRUFBU3hDLFNBQ2pCdkMsRUFBRSxtQkFDUndGLE9BQ2RyRSxRQUFRQyxJQUFJMkQsRUFBU3hDLFVBR3pCMUMsV0FBV0ksVUFBVTZFLHlCQUEyQixTQUFVQyxHQUN0RDVELFFBQVFDLElBQUkyRCxHQUNRL0UsRUFBRSxtQkFDUndGLE9BRWQsSUFFSW5FLEVBRmMsb0NBQ0gwRCxFQUFTdEIsSUFFSHpELEVBQUUsbUJBQ1J1QixJQUFJRixJQUd2QnJCLEVBQUUsWUFDbUIsSUFBSUgsWUFDVkssTUFDWEwsV0FBV0UsY0FBZ0JDLEVBQUUiLCJmaWxlIjoidGVhY2hlci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBBZGRUZWFjaGVyKCkge1xuICAgIHRoaXMucHJvZ3Jlc3NHcm91cCA9ICQoJyNwcm9ncmVzcy1ncm91cCcpO1xufVxuXG5BZGRUZWFjaGVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRoYXQgPXRoaXM7XG4gICAgLy8gdGhhdC5saXN0ZW5VcGxvYWRmaWxlRXZlbnQoKTtcbiAgICB0aGF0Lmxpc3RlblFpbml1RmlsZVVwbG9hZEV2ZW50KCk7XG4gICAgdGhhdC5pbml0VWVkaXRvcigpO1xuICAgIHRoYXQubGlzdGVuQWRkTmV3c0V2ZW50KCk7XG4gICAgdGhhdC5saXN0ZW5EZWxldGVUZWFjaGVyRXZlbnQoKTtcbn07XG5cbkFkZFRlYWNoZXIucHJvdG90eXBlLmluaXRVZWRpdG9yID0gZnVuY3Rpb24gKCkge1xuICAgIHdpbmRvdy51ZSA9IFVFLmdldEVkaXRvcigncHJvZmlsZS1lZGl0b3InLCB7XG4gICAgICAgICdpbml0aWFsRnJhbWVIZWlnaHQnOiA1MDAsXG4gICAgICAgICdzZXJ2ZXJVcmwnOiAnL3VlZGl0b3IvdXBsb2FkLydcbiAgICB9KTtcbn07XG5cbkFkZFRlYWNoZXIucHJvdG90eXBlLmxpc3RlbkFkZE5ld3NFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHRoYXQgPSB0aGlzO1xuICB2YXIgc3VibWl0QnRuID0gJCgnI3RlYWNoZXItc3VibWl0LWJ0bicpO1xuICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICB2YXIgYnRuID0gJCh0aGlzKTtcbiAgICAgIHZhciBwayA9IGJ0bi5hdHRyKCdkYXRhLXRlYWNoZXItaWQnKTtcbiAgICAgIGNvbnNvbGUubG9nKCdwa+eahOWAvDonLCBwayk7XG4gICAgICB2YXIgdXJsID0gJyc7XG5cbiAgICAgIGlmIChwaykge1xuICAgICAgICAgIHVybCA9ICcvY21zL2VkaXRfY291cnNlX3RlYWNoZXIvJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXJsID0gJy9jbXMvYWRkX2NvdXJzZV90ZWFjaGVyLyc7XG4gICAgICB9XG5cbiAgICAgIHZhciB1c2VybmFtZSA9ICQoXCJpbnB1dFtuYW1lPSd1c2VybmFtZSddXCIpLnZhbCgpO1xuICAgICAgdmFyIGpvYnRpdGxlID0gJChcImlucHV0W25hbWU9J2pvYnRpdGxlJ11cIikudmFsKCk7XG4gICAgICB2YXIgYXZhdGFyX3VybCA9ICQoXCJpbnB1dFtuYW1lPSd0aHVtYm5haWwnXVwiKS52YWwoKTtcbiAgICAgIHZhciBwcm9maWxlID0gd2luZG93LnVlLmdldENvbnRlbnQoKTtcbiAgICAgIGNvbnNvbGUubG9nKHVzZXJuYW1lLCBqb2J0aXRsZSwgYXZhdGFyX3VybCwgcHJvZmlsZSk7XG5cbiAgICAgICQucG9zdCh7XG4gICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAndXNlcm5hbWUnOiB1c2VybmFtZSxcbiAgICAgICAgICAgICAgJ2pvYnRpdGxlJzogam9idGl0bGUsXG4gICAgICAgICAgICAgICdhdmF0YXJfdXJsJzogYXZhdGFyX3VybCxcbiAgICAgICAgICAgICAgJ3Byb2ZpbGUnOiBwcm9maWxlLFxuICAgICAgICAgICAgICAncGsnOiBwa1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRTdWNjZXNzKCfmt7vliqDorrLluIjmiJDlip8hJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93RXJyb3IocmVzLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93RXJyb3IocmVzLm1lc3NhZ2UpO1xuICAgICAgICAgIH1cbiAgICAgIH0pXG4gIH0pXG59O1xuXG5BZGRUZWFjaGVyLnByb3RvdHlwZS5saXN0ZW5EZWxldGVUZWFjaGVyRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciB0aGF0ID0gdGhpcztcbiAgdmFyIGJ0biA9ICQoJy5kZWxldGUtYnRuJyk7XG4gIGJ0bi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBjdXJyZW50QnRuID0gJCh0aGlzKTtcbiAgICB2YXIgdGVhY2hlcl9pZCA9IGN1cnJlbnRCdG4uYXR0cignZGF0YS10ZWFjaGVyLWlkJyk7XG5cbiAgICB4ZnphbGVydC5hbGVydENvbmZpcm0oe1xuICAgICAgJ3RleHQnOiAn5L2g56Gu5a6e6KaB5Yig6Zmk6K+l6K6y5biIPycsXG4gICAgICAnY29uZmlybUNhbGxiYWNrJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAkLnBvc3Qoe1xuICAgICAgICAgIHVybDogJy9jbXMvZGVsZXRlX2NvdXJzZV90ZWFjaGVyLycsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgJ3RlYWNoZXJfaWQnOiB0ZWFjaGVyX2lkXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDIwMCkge1xuICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dTdWNjZXNzKG1lc3NhZ2U9cmVzLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICB9KVxufTtcblxuQWRkVGVhY2hlci5wcm90b3R5cGUubGlzdGVuVXBsb2FkZmlsZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB0aHVtYkJ0biA9ICQoJyN0aHVtYm5haWwtYnRuJyk7XG4gICAgdGh1bWJCdG4uY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8g6L+Z6YeM5Y+v5Lul5LiK5Lyg5aSa5Liq5Zu+54mH77yM55SoZmlsZVswXemAieS4reesrOS4gOS4qjtcbiAgICAgICAgdmFyIGZpbGUgPSB0aGlzLmZpbGVzWzBdO1xuICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgZmlsZSk7XG5cbiAgICAgICAgJC5wb3N0KHtcbiAgICAgICAgICAgIHVybDogJy9jbXMvdXBsb2FkX2ZpbGUvJyxcbiAgICAgICAgICAgIGRhdGE6IGZvcm1EYXRhLFxuICAgICAgICAgICAgY29udGVudFR5cGU6IGZhbHNlLFxuICAgICAgICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSByZXNbJ2RhdGEnXVsndXJsJ107XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aHVtYm5haWxJbnB1dCA9ICQoJyN0aHVtYm5haWwtZm9ybScpO1xuICAgICAgICAgICAgICAgICAgICB0aHVtYm5haWxJbnB1dC52YWwodXJsKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93RXJyb3IocmVzLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KTtcbn07XG5cbkFkZFRlYWNoZXIucHJvdG90eXBlLmxpc3RlblFpbml1RmlsZVVwbG9hZEV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdGhhdCA9IHRoaXM7XG4gIHZhciB0aHVtYm5haWxCdG4gPSAkKCcjdGh1bWJuYWlsLWJ0bicpO1xuXG4gIHRodW1ibmFpbEJ0bi5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGZpbGUgPSB0aGlzLmZpbGVzWzBdO1xuICAgICAgJC5nZXQoe1xuICAgICAgICAgIHVybDogJy9jbXMvcW5fdG9rZW4vJyxcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSByZXNbJ2RhdGEnXVsndG9rZW4nXTtcbiAgICAgICAgICAgICAgICAgIC8vIOmAmui/h+aXtumXtOaIsyArIOaWh+S7tuWQjue8gOWQjeeahOaWueW8j+eUn+aIkCBrZXlcbiAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpICsgJy4nICsgZmlsZS5uYW1lLnNwbGl0KCcuJylbMV07XG4gICAgICAgICAgICAgICAgICB2YXIgcHV0RXh0cmEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgZm5hbWU6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHt9LFxuICAgICAgICAgICAgICAgICAgICAgIC8vIG1pbWVUeXBlOiBbJ2ltYWdlL3BuZycsICdpbWFnZS9qcGVnJywgJ2ltYWdlL2dpZicsICd2aWRlby94LW1zLXdtdicsICd2aWRlby9mbHYnXVxuICAgICAgICAgICAgICAgICAgICAgIG1pbWVUeXBlOiBudWxsXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgdmFyIGNvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICB1c2VDZG5Eb21haW46IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgcmV0cnlDb3VudDogNSxcbiAgICAgICAgICAgICAgICAgICAgICByZWdpb246IHFpbml1LnJlZ2lvbi56MlxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgIHZhciBvYnNlcnZhYmxlID0gcWluaXUudXBsb2FkKGZpbGUsIGtleSwgdG9rZW4sIHB1dEV4dHJhLCBjb25maWcpO1xuICAgICAgICAgICAgICAgICAgb2JzZXJ2YWJsZS5zdWJzY3JpYmUoe1xuICAgICAgICAgICAgICAgICAgICAgICduZXh0JzogdGhhdC5oYW5kbGVGaWxlVXBsb2FkUHJvY2VzcyxcbiAgICAgICAgICAgICAgICAgICAgICAnZXJyb3InOiB0aGF0LmhhbmRsZUZpbGVVcGxvYWRFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAnY29tcGxldGUnOiB0aGF0LmhhbmRsZUZpbGVVcGxvYWRDb21wbGV0ZVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgfSlcbiAgfSlcbn07XG5cbkFkZFRlYWNoZXIucHJvdG90eXBlLmhhbmRsZUZpbGVVcGxvYWRQcm9jZXNzID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgdmFyIHRvdGFsID0gcmVzcG9uc2UudG90YWw7XG4gICAgdmFyIHBlcmNlbnQgPSB0b3RhbC5wZXJjZW50O1xuICAgIHZhciBwZXJjZW50VGV4dCA9IHBlcmNlbnQudG9GaXhlZCgwKSArICclJztcbiAgICB2YXIgcHJvZ3Jlc3NHcm91cCA9IEFkZFRlYWNoZXIucHJvZ3Jlc3NHcm91cDtcbiAgICBwcm9ncmVzc0dyb3VwLnNob3coKTtcblxuICAgIHZhciBwcm9ncmVzc0JhciA9ICQoJy5wcm9ncmVzcy1iYXInKTtcbiAgICBwcm9ncmVzc0Jhci5jc3Moeyd3aWR0aCc6IHBlcmNlbnRUZXh0fSk7XG4gICAgcHJvZ3Jlc3NCYXIudGV4dChwZXJjZW50VGV4dCk7XG5cbn07XG5cbkFkZFRlYWNoZXIucHJvdG90eXBlLmhhbmRsZUZpbGVVcGxvYWRFcnJvciA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dFcnJvcihyZXNwb25zZS5tZXNzYWdlKTtcbiAgICB2YXIgcHJvZ3Jlc3NHcm91cCA9ICQoJyNwcm9ncmVzcy1ncm91cCcpO1xuICAgIHByb2dyZXNzR3JvdXAuaGlkZSgpO1xuICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLm1lc3NhZ2UpO1xufTtcblxuQWRkVGVhY2hlci5wcm90b3R5cGUuaGFuZGxlRmlsZVVwbG9hZENvbXBsZXRlID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgIHZhciBwcm9ncmVzc0dyb3VwID0gJCgnI3Byb2dyZXNzLWdyb3VwJyk7XG4gICAgcHJvZ3Jlc3NHcm91cC5oaWRlKCk7XG5cbiAgICB2YXIgcWluaXVEb21haW4gPSAnaHR0cDovL3B0bW9vbHBmby5ia3QuY2xvdWRkbi5jb20vJztcbiAgICB2YXIgZmlsZU5hbWUgPSByZXNwb25zZS5rZXk7XG4gICAgdmFyIHVybCA9IHFpbml1RG9tYWluICsgZmlsZU5hbWU7XG4gICAgdmFyIHRodW1ibmFpbElucHV0ID0gJCgnI3RodW1ibmFpbC1mb3JtJyk7XG4gICAgdGh1bWJuYWlsSW5wdXQudmFsKHVybCk7XG59O1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYWRkVGVhY2hlciA9IG5ldyBBZGRUZWFjaGVyKCk7XG4gICAgYWRkVGVhY2hlci5ydW4oKTtcbiAgICBBZGRUZWFjaGVyLnByb2dyZXNzR3JvdXAgPSAkKCcjcHJvZ3Jlc3MtZ3JvdXAnKTtcbn0pOyJdfQ==
